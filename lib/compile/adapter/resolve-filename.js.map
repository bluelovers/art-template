{"version":3,"sources":["../../../src/compile/adapter/resolve-filename.js"],"names":["detectNode","window","LOCAL_MODULE","resolveFilename","filename","options","path","require","root","extname","test","from","self","base","dirname","resolve","module","exports"],"mappings":";;AAAA,IAAMA,aAAa,OAAOC,MAAP,KAAkB,WAArC;AACA,IAAMC,eAAe,QAArB;;AAEA;;;;;;AAMA,IAAMC,kBAAkB,SAAlBA,eAAkB,CAACC,QAAD,EAAWC,OAAX,EAAuB;AAC3C;AACA,QAAIL,UAAJ,EAAgB;AACZ,YAAMM,OAAOC,QAAQ,MAAR,CAAb;AACA,YAAMC,OAAOH,QAAQG,IAArB;AACA,YAAMC,UAAUJ,QAAQI,OAAxB;;AAEA,YAAIP,aAAaQ,IAAb,CAAkBN,QAAlB,CAAJ,EAAiC;AAC7B,gBAAMO,OAAON,QAAQD,QAArB;AACA,gBAAMQ,OAAO,CAACD,IAAD,IAASP,aAAaO,IAAnC;AACA,gBAAME,OAAOD,OAAOJ,IAAP,GAAcF,KAAKQ,OAAL,CAAaH,IAAb,CAA3B;AACAP,uBAAWE,KAAKS,OAAL,CAAaF,IAAb,EAAmBT,QAAnB,CAAX;AACH,SALD,MAKO;AACHA,uBAAWE,KAAKS,OAAL,CAAaP,IAAb,EAAmBJ,QAAnB,CAAX;AACH;;AAED,YAAI,CAACE,KAAKG,OAAL,CAAaL,QAAb,CAAL,EAA6B;AACzBA,uBAAWA,WAAWK,OAAtB;AACH;AACJ;;AAED,WAAOL,QAAP;AACH,CAtBD;;AAwBAY,OAAOC,OAAP,GAAiBd,eAAjB","file":"resolve-filename.js","sourcesContent":["const detectNode = typeof window === 'undefined';\nconst LOCAL_MODULE = /^\\.+\\//;\n\n/**\n * 获取模板的绝对路径\n * @param   {string} filename\n * @param   {Object} options\n * @return  {string}\n */\nconst resolveFilename = (filename, options) => {\n    /* istanbul ignore else  */\n    if (detectNode) {\n        const path = require('path');\n        const root = options.root;\n        const extname = options.extname;\n\n        if (LOCAL_MODULE.test(filename)) {\n            const from = options.filename;\n            const self = !from || filename === from;\n            const base = self ? root : path.dirname(from);\n            filename = path.resolve(base, filename);\n        } else {\n            filename = path.resolve(root, filename);\n        }\n\n        if (!path.extname(filename)) {\n            filename = filename + extname;\n        }\n    }\n\n    return filename;\n};\n\nmodule.exports = resolveFilename;\n"]}