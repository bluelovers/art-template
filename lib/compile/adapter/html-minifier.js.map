{"version":3,"sources":["../../../src/compile/adapter/html-minifier.js"],"names":["detectNode","window","htmlMinifier","source","options","require","minify","htmlMinifierOptions","ignoreCustomFragments","rules","map","rule","test","push","module","exports"],"mappings":";;;;AAAA,IAAMA,aAAa,OAAOC,MAAP,KAAkB,WAArC;;AAEA;;;;;;AAMA,IAAMC,eAAe,SAAfA,YAAe,CAACC,MAAD,EAASC,OAAT,EAAqB;AACtC,QAAIJ,UAAJ,EAAgB;AAAA;;AACZ,YAAME,gBAAeG,QAAQ,eAAR,EAAyBC,MAA9C;AACA,YAAMC,sBAAsBH,QAAQG,mBAApC;AACA,YAAMC,wBAAwBJ,QAAQK,KAAR,CAAcC,GAAd,CAAkB;AAAA,mBAAQC,KAAKC,IAAb;AAAA,SAAlB,CAA9B;AACA,qDAAoBJ,qBAApB,EAA0CK,IAA1C,iDAAkDL,qBAAlD;AACAL,iBAASD,cAAaC,MAAb,EAAqBI,mBAArB,CAAT;AACH;;AAED,WAAOJ,MAAP;AACH,CAVD;;AAYAW,OAAOC,OAAP,GAAiBb,YAAjB","file":"html-minifier.js","sourcesContent":["const detectNode = typeof window === 'undefined';\n\n/**\n * HTML 压缩器\n * @param  {string}     source\n * @param  {Object}     options\n * @return {string}\n */\nconst htmlMinifier = (source, options) => {\n    if (detectNode) {\n        const htmlMinifier = require('html-minifier').minify;\n        const htmlMinifierOptions = options.htmlMinifierOptions;\n        const ignoreCustomFragments = options.rules.map(rule => rule.test);\n        htmlMinifierOptions.ignoreCustomFragments.push(...ignoreCustomFragments);\n        source = htmlMinifier(source, htmlMinifierOptions);\n    }\n\n    return source;\n};\n\nmodule.exports = htmlMinifier;\n"]}